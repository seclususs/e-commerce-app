<tr class="animated-element admin-card-row" id="product-row-{{ product.id }}">
  <td data-label="Pilih:">
    <label class="custom-checkbox">
      <input type="checkbox"
             name="product_ids"
             value="{{ product.id }}"
             class="product-checkbox checkbox-input">
      <span class="checkbox-box"><span class="checkmark"></span></span>
    </label>
  </td>

  <td data-label="ID:">{{ product.id }}</td>
  <td data-label="Gambar:">
    <img src="{{ url_for('images.serve_image', filename=product.image_url) if product.image_url else url_for('static', filename='images/placeholder.png') }}"
         alt="{{ product.name }}"
         width="50"
         style="border-radius: 5px; object-fit: cover;">
  </td>
  <td data-label="Nama:">{{ product.name }}</td>
  <td data-label="SKU:" class="collapsible-detail">{{ product.sku or 'N/A' }}</td>
  <td data-label="Kategori:" class="collapsible-detail category-name-cell">{{ product.category_name or 'N/A' }}</td>
  <td data-label="Harga:" class="collapsible-detail price-cell">
    {% set effective_price = (product.discount_price if product.discount_price and product.discount_price > 0 else product.price) or 0 %}
    {% set original_price = (product.price if product.discount_price and product.discount_price > 0 else None) or 0 %}

    {% if product.has_variants %}
        <span style="font-style: italic; color: var(--color-text-secondary);">Mulai dari</span><br>
    {% endif %}

    {% if original_price > 0 and effective_price < original_price %}
      <span class="discount-price">{{ effective_price|rupiah }}</span>
      <del>{{ original_price|rupiah }}</del>
    {% else %}
      <span>{{ effective_price|rupiah }}</span>
    {% endif %}
  </td>
  <td data-label="Stok:" class="collapsible-detail">
    {% if product.has_variants %}
      <span style="color: var(--color-info);">Bervariasi</span> ({{ product.stock }})
    {% else %}
      {{ product.stock }}
    {% endif %}
  </td>
  <td data-label="Aksi:" class="action-buttons">
    <div class="desktop-actions">
      <a href="{{ url_for('admin.admin_edit_product', id=product.id) }}"
         class="action-link action-link-edit">
        Edit
      </a>
      <a href="{{ url_for('admin.delete_product', id=product.id) }}"
         class="action-link action-link-delete"
         data-ajax="true"
         data-remove-target="#product-row-{{ product.id }}">
        Hapus
      </a>
    </div>
    <button class="mobile-details-toggle">
      Lihat Detail <i class="fas fa-chevron-down"></i>
    </button>
  </td>
</tr>