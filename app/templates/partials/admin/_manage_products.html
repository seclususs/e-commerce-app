<div class="admin-tabs-container">
    <div class="admin-tabs">
        <button type="button" class="admin-tab-btn active" data-tab="tab-list">List Produk</button>
        <button type="button" class="admin-tab-btn" data-tab="tab-add">Tambah Produk Baru</button>
    </div>

    <div class="admin-tab-content active" id="tab-list">
        <div class="admin-card animated-element">
            <h3>Daftar Produk</h3>

            <div class="product-search-bar" style="margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--color-border-default);">
                <form method="GET" action="{{ url_for('admin.admin_products') }}" id="admin-product-filter-form">
                    <div class="form-grid" style="align-items: flex-end; gap: 1rem;">
                        <div class="form-group">
                            <label for="search">Cari Nama/SKU</label>
                            <input type="search" name="search" class="form-control" placeholder="Ketik untuk mencari..." value="{{ request.args.get('search', '') }}">
                        </div>
                        <div class="form-group">
                            <label for="category">Kategori</label>
                            <select name="category" class="form-control">
                                <option value="">Semua Kategori</option>
                                {% for cat in categories %}
                                    <option value="{{ cat.id }}" {% if request.args.get('category')|int == cat.id %}selected{% endif %}>{{ cat.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="stock_status">Status Stok</label>
                            <select name="stock_status" class="form-control">
                                <option value="">Semua</option>
                                <option value="in_stock" {% if request.args.get('stock_status') == 'in_stock' %}selected{% endif %}>Tersedia</option>
                                <option value="low_stock" {% if request.args.get('stock_status') == 'low_stock' %}selected{% endif %}>Stok Menipis (â‰¤5)</option>
                                <option value="out_of_stock" {% if request.args.get('stock_status') == 'out_of_stock' %}selected{% endif %}>Habis</option>
                            </select>
                        </div>
                        <div class="form-group">
                             <a href="{{ url_for('admin.admin_products') }}" class="cta-button-secondary" id="reset-filter-btn" style="width: 100%; text-align: center;">Reset Filter</a>
                        </div>
                    </div>
                </form>
            </div>

            <form method="POST" action="{{ url_for('admin.admin_products') }}" id="bulk-action-form" data-ajax="true" data-update-action="bulk-action">
                <input type="hidden" name="form_type" value="bulk_action">
                <div class="bulk-actions-container">
                    <div class="form-group"><label for="bulk-action-select">Aksi Massal</label>
                        <select name="bulk_action" id="bulk-action-select" class="form-control">
                            <option value="" disabled selected>Pilih Aksi</option>
                            <option value="delete">Hapus</option>
                            <option value="set_category">Ubah Kategori</option>
                        </select>
                    </div>
                    <div id="bulk-category-selector" class="form-group hidden"><label for="bulk-category-id">Kategori Baru</label>
                         <select name="bulk_category_id" id="bulk-category-id" class="form-control">
                            {% for cat in categories %}<option value="{{ cat.id }}">{{ cat.name }}</option>{% endfor %}
                        </select>
                    </div>
                    <div class="form-group"><button type="submit" class="cta-button">Terapkan</button></div>
                </div>
                <div class="table-wrapper">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>
                                    <label class="custom-checkbox" title="Pilih semua">
                                        <input type="checkbox" id="select-all-products" class="checkbox-input">
                                        <span class="checkbox-box"><span class="checkmark"></span></span>
                                    </label>
                                </th>
                                <th>ID</th><th>Gambar</th><th>Nama</th><th>SKU</th><th>Kategori</th><th>Harga</th><th>Stok</th><th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="products-table-body">
                            {% include 'partials/admin/_product_table_body.html' %}
                        </tbody>
                    </table>
                </div>
            </form>
        </div>
    </div>

    <div class="admin-tab-content" id="tab-add">
        {% include 'partials/admin/_add_product.html' %}
    </div>
</div>